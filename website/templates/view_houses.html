{% extends "base.html" %}
{% block title %}View Houses{% endblock %}
{% block content %}
  <body class="no-footer">
    <div class="viewpage-container">
      <h2>Available Houses</h2>
      {% if houses %}
        <div class="row">
          {% for house in houses %}
            <div class="col-md-6">
              <div class="house-item">
                <div class="house-details">
                  <h2>House Name: {{ house.house_name }}</h2>

                  <!-- First Column: Owner, Phone, Price, Menu -->
                  <div class="column">
                    <p>Owner: {{ house.owner }}</p>
                    <p>Phone: {{ house.phone }}</p>
                    <p>Price: {{ house.price }}</p>
                    <p>Menu: {{ house.menu }}</p>
                  </div>

                  <!-- Second Column: Photos, Location -->
                  <div class="column">
                    <!-- Display multiple photos with lightbox -->
                    <div class="house-photos">
                      {% for photo in house.photos %}
                        <a href="{{ url_for('static', filename='images/' + photo.filename) }}" data-lightbox="house-{{ house.id }}">
                          <img src="{{ url_for('static', filename='images/' + photo.filename) }}" alt="House Photo" class="thumbnail">
                        </a>
                      {% endfor %}
                    </div>
                  </div>

                  <!-- Additional Details: Street and Description -->
                  <div class="additional-details">
                    <p>Street: {{ house.street }}</p>
                    {% if house.description %}
                      <p>Description: {{ house.description }}</p>
                    {% else %}
                      <p>No description available</p>
                    {% endif %}
                  </div>
                </div>

                {% if house.user_id == current_user.id %}
                  <form method="POST" action="{{ url_for('auth.delete_house', house_id=house.id) }}">
                    <button type="submit">Delete</button>
                  </form>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="no-houses">No available houses.</p>
      {% endif %}

      <a href="{{ url_for('auth.upload_house') }}" class="upload-link">Upload House</a>
    </div>

    <!-- Include lightbox script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
  </body>
{% endblock %}